<div class="multicolumn color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    {% if section.settings.title != blank %}
      <div class="title-wrapper title-wrapper--{{ section.settings.heading_alignment | default: 'center' }}">
        <h2 class="title inline-richtext {{ section.settings.heading_size | default: 'h1' }}">
          {{ section.settings.title }}
        </h2>
      </div>
    {% endif %}

    <div class="multicolumn-list grid grid--{{ section.settings.columns_desktop | default: 3 }}-col-desktop grid--{{ section.settings.columns_mobile | default: 1 }}-col-tablet-down">
      {% for block in section.blocks %}
        <div class="multicolumn-card content-container" {{ block.shopify_attributes }}>
          {% if block.settings.image != blank %}
            <div class="multicolumn-card__image-wrapper">
              <img
                src="{{ block.settings.image }}"
                alt="{{ block.settings.image_alt | default: block.settings.title }}"
                class="multicolumn-card__image"
                loading="lazy"
              >
            </div>
          {% endif %}

          <div class="multicolumn-card__info">
            {% if block.settings.title != blank %}
              <h3 class="multicolumn-card__title {{ block.settings.title_size | default: 'h3' }}">
                {{ block.settings.title }}
              </h3>
            {% endif %}

            {% if block.settings.text != blank %}
              <div class="multicolumn-card__text rte">
                {{ block.settings.text }}
              </div>
            {% endif %}

            {% if block.settings.author != blank %}
              <div class="multicolumn-card__author">
                <span class="multicolumn-card__author-name">{{ block.settings.author }}</span>
                {% if block.settings.author_role != blank %}
                  <span class="multicolumn-card__author-role">{{ block.settings.author_role }}</span>
                {% endif %}
              </div>
            {% endif %}

            {% if block.settings.link_label != blank %}
              <a
                href="{{ block.settings.link }}"
                class="link link--text"
              >
                {{ block.settings.link_label }}
              </a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Multicolumn",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Multicolumn"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "h2", "label": "Small" },
        { "value": "h1", "label": "Medium" },
        { "value": "h0", "label": "Large" }
      ],
      "default": "h1"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Number of columns on desktop",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "label": "Number of columns on mobile",
      "min": 1,
      "max": 2,
      "step": 1,
      "default": 1
    }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "Column",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Column"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post.</p>"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author"
        },
        {
          "type": "text",
          "id": "author_role",
          "label": "Author role"
        },
        {
          "type": "text",
          "id": "link_label",
          "label": "Link label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Multicolumn",
      "blocks": [
        { "type": "column" },
        { "type": "column" },
        { "type": "column" }
      ]
    }
  ]
}
{% endschema %}
